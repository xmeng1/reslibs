# 自动化工作流

### 需求: 通用资源处理任务
系统应提供一个自动化 CLI 任务 `process_resource`，用于处理单个或批量的多种类型资源。

#### 场景: 任务触发
- **当** 管理员运行 Python CLI 并指定资源类型时
- **那么** 自动化工作流开始处理相应类型的资源

#### 场景: 资源类型识别
- **当** 系统接收到资源时
- **那么** 它自动识别资源类型（Unity Assets、软件工具、设计素材等）并应用相应的处理规则

### 需求: 多源资源获取阶段
系统应支持从多个源下载并预处理资源。

#### 场景: 输入验证
- **当** 管理员提供来源链接和提取码时
- **那么** 系统验证来源类型（百度网盘、阿里云盘、其他网盘）并处理输入

#### 场景: 多平台文件下载
- **当** 提供有效凭据时
- **那么** 脚本使用对应的下载工具（BaiduPCS、其他云盘工具）将文件下载到 `./temp/download/` 目录

#### 场景: 智能预处理
- **当** 检测到不同格式的文件时（.zip, .rar, .7z, .unitypackage, .exe, .psd, .mp4 等）
- **那么** 系统根据文件类型提取相应的元数据、预览内容，并从文件名中识别关键词和分类

### 需求: 资源类型特化的 AI 内容生成
系统应使用 LLM API 为不同类型资源生成 SEO 友好的内容。

#### 场景: 类型感知内容输入
- **当** 提取文件元数据时
- **那么** 系统根据资源类型将不同的元数据（文件名、readme、文件结构、技术参数、使用说明等）发送到 LLM API

#### 场景: 资源特化内容输出
- **当** LLM 处理完成时
- **那么** 系统接收包含资源特定信息的 JSON：SEO 优化的标题（中英文）、类型特定的详细描述、相关技术规格、使用场景说明、5-8个相关标签

#### 场景: 内容模板适配
- **当** 系统处理特定资源类型时
- **那么** 它使用对应的 AI 提示模板，生成符合该资源类型特点的内容描述

### 需求: 智能多主机分发
系统应将不同类型的资源分发到最适合的文件托管服务。

#### 场景: 智能重新打包
- **当** 资源需要品牌标识时
- **那么** 系统根据资源类型添加相应的说明文档（如软件安装指南、素材使用说明等）并重新压缩

#### 场景: 类型特定分发策略
- **当** 分发开始时
- **那么** 系统根据资源类型选择最佳渠道：软件类到程序下载站、设计素材到素材分享平台、大型文件到高速网盘

#### 场景: 分发链接管理
- **当** 上传成功完成时
- **那么** 系统收集和分类不同平台的下载链接，为用户提供多样化的下载选择

### 需求: 类型自适应网站发布
系统应自动将不同类型资源发布到 CMS，采用相应的展示方式。

#### 场景: 多媒体预览处理
- **当** 提取不同类型的预览内容时
- **那么** 系统处理：图像缩略图、视频预览、音频采样、软件截图等，并上传到对象存储

#### 场景: 动态内容创建
- **当** 所有元数据准备就绪时
- **那么** 系统根据资源类型创建相应的内容条目：软件详情页、素材展示页、教程介绍页等

#### 场景: 智能清理
- **当** 发布完成时
- **那么** 系统根据资源类型保留必要的临时文件，删除其他临时数据

### 需求: 全面的错误处理和恢复
系统应通过适当的重试机制优雅地处理多种故障情况。

#### 场景: 多源下载失败恢复
- **当** 任何来源下载失败时（验证码/限速/链接失效）
- **那么** 系统实现来源切换、重试逻辑或发送警报

#### 场景: 类型特定错误处理
- **当** 特定类型资源处理失败时
- **那么** 系统应用该资源类型的专门错误处理和恢复策略

#### 场景: 智能损坏检测
- **当** 文件解压或解析失败时
- **那么** 系统根据文件类型使用相应的验证方法标记资源状态并通知管理员