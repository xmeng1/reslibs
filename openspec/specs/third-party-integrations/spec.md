# 第三方集成

### 需求: 百度网盘集成
系统应与百度网盘集成以访问源文件。

#### 场景: 身份验证设置
- **当** 配置百度网盘访问时
- **那么** 管理员在环境变量中提供 `BDUSS` 和 `STOKEN`

#### 场景: 文件操作
- **当** 访问百度网盘时
- **那么** 系统使用 `BaiduPCS-Go` 编译二进制文件进行文件列表和下载

### 需求: AI 内容生成集成
系统应与 AI 服务集成以生成内容。

#### 场景: AI 提供商选择
- **当** 配置 AI 服务时
- **那么** 系统优先选择 Google Gemini Pro 1.5，因其高免费配额和长上下文窗口

#### 场景: API 配置
- **当** 设置 AI 集成时
- **那么** 系统使用 `GEMINI_API_KEY` 环境变量进行身份验证

#### 场景: 内容生成请求
- **当** 生成内容时
- **那么** 系统将文件元数据发送到 AI 服务，并接收包含标题、描述和标签的结构化 JSON 响应

### 需求: 文件托管集成
系统应与多个变现文件托管服务集成。

#### 场景: Rapidgator 集成
- **当** 上传到 Rapidgator 时
- **那么** 系统使用 FTP 上传，配置主机、用户名和密码

#### 场景: 诚通集成
- **当** 使用诚通托管时
- **那么** 系统通过开发者 API 或 WebDAV 接口集成

#### 场景: 飞猫云集成
- **当** 上传到飞猫云时
- **那么** 系统使用提供的 API 接口进行文件上传和链接生成

### 需求: 图像托管集成
系统应与对象存储集成以托管图像。

#### 场景: 云存储选择
- **当** 选择图像托管时
- **那么** 系统使用 Cloudflare R2 提供的 S3 兼容 API，无出口流量费用

#### 场景: 图像上传工作流
- **当** 存储预览图像时
- **那么** 系统将图像上传到 R2 并生成用于网站显示的公共 URL

### 需求: 外部服务配置
系统应安全地管理外部服务凭据。

#### 场景: 环境变量管理
- **当** 配置外部服务时
- **那么** 所有 API 密钥和凭据都存储在环境变量中，而不是代码中

#### 场景: 服务健康监控
- **当** 使用外部 API 时
- **那么** 系统为服务中断实现重试逻辑和错误处理